参考：深入理解计算机系统，第1版，第9章，本地位置："F:\iii\ii\i\ref\book\深入理解计算机系统-第1版.pdf"

## 计算机用来记录时间的两种机制

- 基于低频率计时器，它会周期性中断处理器
- 基于计数器

## 中断和进程调度

外部事件，例如击键、磁盘操作和网络活动，会产生中断信号。而且即使没有这些事件，处理器也需要得到中断信号用来切换进程，出于这个原因，计算机有一个外部计时器，它周期地向处理器发送中断信号，典型计时器的间隔范围为1~10ms。

## 关于获得程序性能可靠测量值的分析

一般来说，可以获得非常短(小于大约10ms)或者非常长(大于大约1s)的时间段的准确测量值，即使是在负载很重的机器上。对于非常短的时间段，上下文来不及切换；对于非常长的时间段，操作系统会维护每个进程的执行时间信息。10ms~1s之间的时间想要准确测量需要特殊的处理。

## 操作系统如何维护每个进程的时间信息

操作系统使用计时器(timer)来记录每个进程使用的累计时间，这种信息提供的是对程序执行时间不那么准确的测量值。

操作系统维护着每个进程使用的用户时间量和系统时间量的计数值，当计数器中断发生时，操作系统会确定哪个进程是活动的，并且对那个进程的一个计数值增加计时器间隔时间。如果系统是在内核模式中执行的，那么就增加系统时间，否则就增加用户时间。

上面一段参考：深入理解计算机系统，第1版，9.2.1节(操作)
